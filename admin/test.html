<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Categories Section</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .category {
      border: 1px solid #ccc;
      margin-bottom: 20px;
      padding: 10px;
    }
  </style>
</head>
<body>

<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <h2>Add New Category</h2>
      <form id="categoryForm">
        <input type="hidden" id="categoryIndex">
        <div class="form-group">
          <label for="type">Type of Item:</label>
          <input type="text" class="form-control" id="type" required>
        </div>
        <div class="form-group">
          <label for="weightPerPrice">Weight per Price:</label>
          <input type="text" class="form-control" id="weightPerPrice" required>
        </div>
        <div class="form-group">
          <label for="spacePerPrice">Space per Price:</label>
          <input type="text" class="form-control" id="spacePerPrice" required>
        </div>
        <div class="form-group">
          <label for="distancePerPrice">Distance per Price:</label>
          <input type="text" class="form-control" id="distancePerPrice" required>
        </div>
        <button type="submit" class="btn btn-primary">Add Category</button>
        <button type="button" id="cancelEdit" class="btn btn-secondary" style="display: none;">Cancel Edit</button>
      </form>
    </div>
  </div>
</div>

<div class="container mt-4">
  <div class="row" id="categoryRow">
    <!-- Categories will be dynamically added here -->
  </div>
</div>

<script>
  // Array to store categories
  let categories = [];

  function addCategory(type, weightPerPrice, spacePerPrice, distancePerPrice) {
    const categoryRow = document.getElementById('categoryRow');
    const newCategory = `
      <div class="col-md-4">
        <div class="category" data-index="${categories.length}">
          <h4>${type}</h4>
          <p>Weight per Price: ${weightPerPrice}</p>
          <p>Space per Price: ${spacePerPrice}</p>
          <p>Distance per Price: ${distancePerPrice}</p>
          <button class="btn btn-danger delete-btn">Delete</button>
          <button class="btn btn-primary edit-btn">Edit</button>
        </div>
      </div>
    `;
    categoryRow.insertAdjacentHTML('beforeend', newCategory);
    
    // Add category to the array
    categories.push({
      type: type,
      weightPerPrice: weightPerPrice,
      spacePerPrice: spacePerPrice,
      distancePerPrice: distancePerPrice
    });
  }

  document.getElementById('categoryForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent default form submission
    const type = document.getElementById('type').value;
    const weightPerPrice = document.getElementById('weightPerPrice').value;
    const spacePerPrice = document.getElementById('spacePerPrice').value;
    const distancePerPrice = document.getElementById('distancePerPrice').value;
    const index = document.getElementById('categoryIndex').value;
    if (index === '') {
      addCategory(type, weightPerPrice, spacePerPrice, distancePerPrice);
    } else {
      editCategory(index, type, weightPerPrice, spacePerPrice, distancePerPrice);
    }
    // Reset form fields after adding/editing the category
    document.getElementById('categoryForm').reset();
    document.getElementById('cancelEdit').style.display = 'none';
    document.getElementById('categoryIndex').value = ''; // Reset the index
  });

  document.addEventListener('click', function(event) {
    if (event.target.classList.contains('delete-btn')) {
      const categoryIndex = event.target.parentElement.getAttribute('data-index');
      categories.splice(categoryIndex, 1); // Remove category from array
      event.target.parentElement.parentElement.remove(); // Remove category from HTML display
    } else if (event.target.classList.contains('edit-btn')) {
      const categoryIndex = event.target.parentElement.getAttribute('data-index');
      const category = categories[categoryIndex];
      document.getElementById('type').value = category.type;
      document.getElementById('weightPerPrice').value = category.weightPerPrice;
      document.getElementById('spacePerPrice').value = category.spacePerPrice;
      document.getElementById('distancePerPrice').value = category.distancePerPrice;
      document.getElementById('categoryIndex').value = categoryIndex; // Set the index for editing
      document.getElementById('cancelEdit').style.display = 'inline'; // Show cancel button
    } else if (event.target.id === 'cancelEdit') {
      document.getElementById('categoryForm').reset();
      document.getElementById('cancelEdit').style.display = 'none';
      document.getElementById('categoryIndex').value = ''; // Reset the index
    }
  });

  function editCategory(index, type, weightPerPrice, spacePerPrice, distancePerPrice) {
    const category = document.querySelector(`[data-index="${index}"]`);
    category.innerHTML = `
      <h4>${type}</h4>
      <p>Weight per Price: ${weightPerPrice}</p>
      <p>Space per Price: ${spacePerPrice}</p>
      <p>Distance per Price: ${distancePerPrice}</p>
      <button class="btn btn-danger delete-btn">Delete</button>
      <button class="btn btn-primary edit-btn">Edit</button>
    `;
    categories[index] = {
      type: type,
      weightPerPrice: weightPerPrice,
      spacePerPrice: spacePerPrice,
      distancePerPrice: distancePerPrice
    };
  }
</script>

</body>
</html>
